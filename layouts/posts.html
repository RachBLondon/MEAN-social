<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Social App</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw==" crossorigin="anonymous">
  </head>
  <body ng-app='app'>
    <div class="container">
      <h1>Recent Posts</h1>
      <div ng-controller='PostsCtrl'>
      <input ng-model='postBody' class='form-control' />
      <button ng-click='addPost()' class='btn btn-default'>Add Posts</button>
        <ul class='list-group'>
            <li ng-repeat='post in posts' class='list-group-item'>
              <strong>@{{post.username}}</strong>
              <span>{{post.body}}</span>
            </li>
        </ul>
      </div>

    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.18/angular.min.js"></script>
    <script>
      var app = angular.module('app',[]);

      app.controller('PostsCtrl', function($scope, $http){
          $scope.addPost = function(){
            if($scope.postBody){
            $scope.posts.unshift({
              username : 'Fred',
              body     : $scope.postBody
            })
            $scope.postBody = null;
          }
        }

        $http.get('http://localhost:3000/api/posts')
        .success(function(posts){
          $scope.posts = posts
        })
      })
    </script>
  </body>
</html>
